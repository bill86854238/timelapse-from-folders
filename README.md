# Timelapse from Folders (Windows)

把「日期資料夾」或「單一含圖片的資料夾」變成縮時影片的超輕量工具。

- ✅ 支援 **無副檔名但其實是 JPEG**（自動補 `.jpg`）
- ✅ 依 **檔案最後修改時間** 排序（適合監視器快照）
- ✅ 自動處理 EXIF 方向、等比縮放與補邊
- ✅ 影片左下可覆蓋 **時間戳** 與 **來源標籤**
- ✅ 可一次處理「多個日期子資料夾」；也可單獨處理某一天
- ✅ Windows 一鍵使用（CMD），虛擬環境建在本機：`%LocalAppData%\TimelapseTool\.venv`

> 目前以 Windows 為主（CMD 啟動）。若需要 macOS 版本可開 Issue。

---

## 下載與檔案結構

請把這三個檔案放在同一個本機資料夾（例如 `C:\TimelapseTool\`）：

- `timelapse_from_folders.py`
- `requirements.txt`
- `timelapse_pick_folder_askfps.cmd`（**雙擊啟動** → 選資料夾 → 輸入 FPS）

> 來源資料夾可以選 NAS（UNC 路徑如 `\\ShanjiaNas\...`），啟動檔請放在本機。

---

## 快速使用

1. **雙擊** `timelapse_pick_folder_askfps.cmd`  
2. 選擇：  
   - **根目錄**（底下有多個日期子資料夾）→ 批次輸出 `<日期>.mp4`  
   - **單一天**（只有圖片的資料夾）→ 輸出該資料夾名的 `.mp4`  
3. 輸入 **FPS**（建議 12 / 24 / 30），再選「是否覆蓋」、「是否顯示時間戳」。  
4. 首次執行會自動建立虛擬環境並安裝套件，完成後影片會輸出到：  
   - `選取的資料夾\_Timelapse\`

---

## 影片參數（重點）

- **FPS**：影格率。常用 12（長時間縮時）、24/30（一般觀看）。  
- **寬度**：內建 1280，會等比縮放並自動補黑邊對齊尺寸。  
- **編碼**：預設 `mp4v`，一般 Windows 可直接播放；也可改 `XVID`。

> 影片長度 ≒ `總張數 ÷ FPS`。例如 2400 張、24 fps → 約 100 秒。

---

## 已知情境與解法

- **UNC 啟動問題**：把啟動檔放在本機，來源資料夾可選 NAS。腳本會自動把 UNC 映射為臨時磁碟再處理。  
- **中文亂碼**：本專案的 CMD 使用全 ASCII 提示，避免亂碼。  
- **影片已存在**：啟動時可選擇是否覆蓋。

---

## 功能腳本簡述

- `timelapse_from_folders.py`  
  - 自動補 `.jpg`（檢查 JPEG 檔頭 `FFD8FF`）  
  - 以 **最後修改時間** 排序  
  - EXIF 方向校正、尺寸調整、時間戳與來源標籤覆蓋  
  - 可處理「多個日期資料夾」或「單一資料夾」

---

## 授權

本專案採用 MIT 授權，詳見 `LICENSE`。

---

## Roadmap / TODO（歡迎 PR）

- 依 **建立時間**（而非 mtime）排序的可選項
- 去除**相近重複影格**（以直方圖/SSIM 篩掉）
- 選擇 `H.264`（藉由系統 ffmpeg / Media Foundation）
- macOS `.command` 一鍵版
